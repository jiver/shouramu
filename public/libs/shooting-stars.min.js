(function(){var t,i,o,e;i=function(t,i,o,e,r,s,n,a,h,l){var d;return d=this,d.x=a,d.y=h,d.size=t,d.color=n,d.border=s,d.outerRad=e,d.innerRad=r,d.rotation=i,d.points=o,d.opacity=0,d.scale=0,d.vx=2*Math.random()-1,d.vy=2*Math.random()-1,d.life=0,d.ss=l,d},i.prototype.update=function(){var t,i,o,e;return this.x+=this.vx,this.y+=this.vy,t=this.ss.canvas,i=this.ss.maxLife,o=this.ss.particlePool,e=this.ss.particles,this.opacity<1&&this.life<i/6&&(this.opacity+=100/(i/6)/100,this.scale+=100/(i/6)/100),this.life++,i-this.life<i/6&&(this.scale-=100/(i/6)/100),i-this.life<i/3?(this.vy*=1.075,this.vx*=1.075,this.opacity=(i-this.life)/100):this.life%2===0&&this.rotation++,this.life>=i&&(this.life=0,this.scale=0,this.x=Math.floor(Math.random()*t.width+1),this.y=Math.floor(Math.random()*t.height+1),this.vx=Math.random()-.5,this.vy=Math.random()-.5,self.vx=2*Math.random()-1,self.vy=2*Math.random()-1,o.push(e.shift())),this},i.prototype.render=function(t){var i,o,e,r,s,n;for(r=this,s=document.createElement("canvas"),s.width=r.size,s.height=r.size,n=s.getContext("2d"),n.save(),n.fillStyle=r.color,n.strokeStyle=r.border,n.globalAlpha=r.opacity,n.translate(r.size/2,r.size/2),n.rotate(r.rotation*Math.PI/180),n.translate(-(r.size/2),-(r.size/2)),n.scale(r.scale,r.scale),n.beginPath(),i=0;i<=2*r.points;)e=i*Math.PI/r.points,o=i%2===0?r.outerRad:r.innerRad,n.lineTo(r.size/2+o*Math.cos(e),r.size/2+o*Math.sin(e)),++i;return n.fill(),n.stroke(),n.restore(),t.drawImage(s,r.x,r.y)},o=function(t,i){var o;return o=void 0,o=void 0,function(){var e,r;return e=void 0,r=void 0,r=this,e=arguments,clearTimeout(o),o=setTimeout(function(){return t.apply(r,e)},i)}},e=function(t,i){var o;for(o in i)i.hasOwnProperty(o)&&void 0!==i[o]&&(t[o]=i[o]);return t},window.ShootingStars=t=function(t){var i,r,s,n;return n=this,r=t.id,s={particleLife:300,amount:5,resizePoll:250,star:{size:{upper:50,lower:25},rotateLimit:45,points:5,innerRadius:.5,borderColor:"#000",fillColor:"red"}},n.options=e(s,t),n.canvas=i=document.getElementById(r),i.width=window.innerWidth,i.height=window.innerHeight,i.ctx=i.getContext("2d"),n.maxLife=n.options.particleLife,n.particles=[],n.particlePool=[],n.poolSize=n.options.amount,window.addEventListener("resize",o(function(){n.canvas.width=window.innerWidth,n.canvas.height=window.innerHeight,n.flushPool()},n.options.resizePoll)),n},t.prototype.flushPool=function(){var t,o,e,r,s,n,a,h,l,d;for(d=this,t=d.canvas,r=d.particlePool=[],s=d.particles=[],n=self.poolSize=d.options.amount,t.width<450&&(n=self.poolSize=n/2),e=0,a=[];n>e;)o=function(t,i){return Math.floor(Math.random()*(t-i+1)+i)},l=o(d.options.star.size.upper,d.options.star.size.lower),h=o(d.options.star.rotateLimit,0),r.push(new i(l,h,5,l/2,l/2*d.options.star.innerRadius,this.options.star.borderColor,this.options.star.fillColor,Math.floor(Math.random()*t.width+1),Math.floor(Math.random()*t.height+1),d)),a.push(e++);return a},t.prototype.render=function(){var t,i,o,e,r,s;for(s=this,t=s.canvas,i=t.ctx,e=s.particlePool,r=s.particles,i.save(),i.clearRect(0,0,t.width,t.height),Math.random()>.95&&r.length<s.poolSize&&e.length>0&&r.push(e.shift()),o=0;o<r.length;)r[o].update(),r[o]&&r[o].render(i),o++;return i.restore(),requestAnimationFrame(function(){return s.render()})}}).call(this);